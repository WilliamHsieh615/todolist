import{_ as f,T as w}from"./EmailInput-BR3qbon0.js";import{c as u,o as p,a as l,u as _,b as g,r as k,d as b,e as a,f as y,g as x,w as v,S as r}from"./index-D9LBVFIm.js";import{_ as C,a as h}from"./BirthdayInput-tdQkO8D0.js";import{a as P}from"./index-NIGUFBhG.js";const $={class:"nickname formControls_area"},B=["value"],N={__name:"NicknameInput",props:{nickname:{type:String,default:""}},emits:["update:nickname"],setup(d,{emit:m}){const t=m;return(n,i)=>(p(),u("div",$,[i[1]||(i[1]=l("label",{class:"formControls_label",for:"name"},"Nickname",-1)),l("input",{class:"formControls_input",type:"text",name:"name",id:"name",placeholder:"請輸入您的暱稱",value:d.nickname,onInput:i[0]||(i[0]=c=>t("update:nickname",c.target.value))},null,40,B)]))}},S="https://todolist-api.hexschool.io/",U={__name:"RegisterForm",setup(d){const m=_(),t=g({email:"",password:"",nickname:""}),n=k(""),i=async()=>{if(console.log("email:",t.email),console.log("password:",t.password),console.log("confirmPassword:",n.value),console.log("nickname:",t.nickname),console.log("birthday:",t.birthday),!t.email||!t.password||!t.nickname||!t.birthday||!n.value)return r.fire({icon:"warning",title:"請填寫全部欄位",text:"欄位尚未填寫完整",confirmButtonColor:"#d33"});if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email))return r.fire({icon:"warning",title:"Email 格式不正確",text:"請輸入正確的 Email 地址",confirmButtonColor:"#d33"});if(!/\d/.test(t.password)||!/[A-Za-z]/.test(t.password)||t.password.length<6||t.password.length>12)return r.fire({icon:"warning",title:"密碼格式不正確",text:"請確認密碼需為 6-12 碼，且包含英文與數字",confirmButtonColor:"#d33"});if(t.password!==n.value)return r.fire({icon:"warning",title:"密碼不一致",text:"請確認兩次輸入的密碼相同",confirmButtonColor:"#d33"});if(!/^\d{4}\/\d{2}\/\d{2}$/.test(t.birthday))return r.fire({icon:"warning",title:"生日格式不正確",text:"請輸入正確格式 YYYY/MM/DD 或使用日期選擇器",confirmButtonColor:"#d33"});try{const s=await P.post(`${S}users/sign_up`,t,{headers:{"Content-Type":"application/json"}});console.log("註冊成功",s),r.fire({icon:"success",title:`${t.nickname} 註冊成功`,text:"將傳送至登入頁",timer:2e3,timerProgressBar:!0}).then(()=>{m.push("/")})}catch(s){console.error("註冊失敗",s),r.fire({icon:"warning",title:"註冊失敗",text:s.response.status===400?s.response.data.message:"請稍後再試！！",confirmButtonColor:"#d33"}).then(()=>{t.email="",t.password="",t.nickname="",t.birthday="",n.value=""})}};return(c,e)=>{const s=b("router-link");return p(),u("form",{class:"formControls",onSubmit:v(i,["prevent"])},[e[6]||(e[6]=l("h2",{class:"formControls_txt"},"註冊帳號",-1)),a(f,{email:t.email,"onUpdate:email":e[0]||(e[0]=o=>t.email=o)},null,8,["email"]),a(C,{password:t.password,"onUpdate:password":e[1]||(e[1]=o=>t.password=o),confirmPassword:n.value,"onUpdate:confirmPassword":e[2]||(e[2]=o=>n.value=o)},null,8,["password","confirmPassword"]),a(N,{nickname:t.nickname,"onUpdate:nickname":e[3]||(e[3]=o=>t.nickname=o)},null,8,["nickname"]),a(h,{birthday:t.birthday,"onUpdate:birthday":e[4]||(e[4]=o=>t.birthday=o)},null,8,["birthday"]),e[7]||(e[7]=l("input",{class:"formControls_btnSubmit",type:"submit",value:"註冊"},null,-1)),a(s,{class:"formControls_btnLink",to:"/"},{default:y(()=>e[5]||(e[5]=[x("登入",-1)])),_:1,__:[5]})],32)}}},T={class:"wrap bg-yellow"},V={id:"registerPage",class:"container registerPage"},R={__name:"RegisterView",setup(d){return(m,t)=>(p(),u("div",T,[l("div",V,[a(w),a(U)])]))}};export{R as default};
